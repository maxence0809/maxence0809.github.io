<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CV - Maxence Peuziat</title>
  <style>
    :root {{ --accent:#1f7ed0; --bg:#f7f9fb; --card:#ffffff; }}
    body{{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;background:var(--bg);color:#111}}
    header{{background:linear-gradient(90deg,var(--accent),#2aa1e0);color:white;padding:1rem 1.25rem;display:flex;align-items:center;justify-content:space-between;gap:1rem}}
    header h1{{margin:0;font-size:1.05rem}}
    .controls{{display:flex;gap:.5rem}}
    .btn{{background:rgba(255,255,255,0.12);border:0;color:white;padding:.5rem .7rem;border-radius:.5rem;font-weight:600;cursor:pointer;text-decoration:none}}
    .btn.secondary{{background:white;color:var(--accent);padding:.45rem .7rem}}
    main{{height:calc(100vh - 68px);display:grid;grid-template-rows:1fr;gap:0;padding:0}}
    .viewer{{width:100%;height:100%;border:0}}
    .fallback{{padding:1.25rem;background:var(--card);text-align:center;}}
    .muted{{color:#666;font-size:0.95rem}}
    @media(min-width:900px){{main{{max-width:1100px;margin:1rem auto;height:calc(100vh - 96px);box-shadow:0 6px 22px rgba(0,0,0,0.08);border-radius:10px;overflow:hidden}}}}
  </style>
</head>
<body>
  <header>
    <h1>CV — Maxence Peuziat</h1>
    <div class="controls">
      <a class="btn" href="cv-maxence-peuziat.pdf" download>Télécharger le PDF</a>
      <button class="btn secondary" onclick="openInNewTab()">Ouvrir dans un nouvel onglet</button>
      <button class="btn" onclick="printPDF()">Imprimer</button>
    </div>
  </header>

  <main>
    <!-- Primary PDF viewer: iframe. Works in modern browsers -->
    <iframe class="viewer" id="pdfViewer" src="cv-maxence-peuziat.pdf#toolbar=0&navpanes=0" title="CV - Maxence Peuziat"></iframe>

    <!-- Fallback for browsers that block embedding -->
    <div class="fallback" id="fallback" style="display:none;">
      <p class="muted">Votre navigateur ne permet pas d'afficher les PDF en ligne.</p>
      <p><a class="btn secondary" href="cv-maxence-peuziat.pdf" download>Télécharger le PDF</a></p>
      <p class="muted">Ou ouvrez le PDF dans un autre onglet / application PDF.</p>
    </div>
  </main>

  <script>
    function openInNewTab(){ window.open("cv-maxence-peuziat.pdf", "_blank"); }
    function printPDF(){ 
      // try to print the iframe content; if blocked, open in new tab
      const iframe = document.getElementById('pdfViewer');
      try {
        iframe.contentWindow.focus();
        iframe.contentWindow.print();
      } catch(e) {
        window.open("cv-maxence-peuziat.pdf", "_blank");
      }
    }
    // Detect if embedding fails (simple heuristic)
    window.addEventListener('load', ()=>{
      const iframe = document.getElementById('pdfViewer');
      // If the iframe's document is empty after load, show fallback (some browsers return about:blank)
      setTimeout(()=>{
        try {
          const src = iframe.getAttribute('src') || '';
          if(!src || src.startsWith('about:') || iframe.contentDocument?.body?.innerHTML.length < 10){
            document.getElementById('fallback').style.display = 'block';
            iframe.style.display = 'none';
          }
        } catch(e){
          // cross-origin or other access issues -> show fallback
          document.getElementById('fallback').style.display = 'block';
          iframe.style.display = 'none';
        }
      }, 700);
    });
  </script>
</body>
</html>
